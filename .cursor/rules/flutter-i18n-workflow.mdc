---
alwaysApply: true
description: Flutterå›½é™…åŒ–å·¥ä½œæµç¨‹è§„åˆ™ - ç¡®ä¿æ‰€æœ‰æ–‡æ¡ˆä¿®æ”¹éƒ½æ­£ç¡®åŒæ­¥åˆ°å›½é™…åŒ–æ–‡ä»¶
---

# ğŸŒ Flutter å›½é™…åŒ–å·¥ä½œæµç¨‹è§„åˆ™

## âš ï¸ ä¸¥æ ¼ç¦æ­¢çš„æ“ä½œ

### ğŸš« ç»å¯¹ä¸è¦ç›´æ¥ä¿®æ”¹ç”Ÿæˆçš„æ–‡ä»¶
```dart
// âŒ ç»å¯¹ç¦æ­¢ç›´æ¥ä¿®æ”¹è¿™äº›æ–‡ä»¶
lib/l10n/s_*.dart
lib/l10n/s.dart
```

è¿™äº›æ–‡ä»¶çš„ç¬¬ä¸€è¡Œéƒ½å†™ç€ `// Generated file. Do not edit.`ï¼Œä»»ä½•ç›´æ¥ä¿®æ”¹éƒ½ä¼šè¢« `flutter gen-l10n` å‘½ä»¤è¦†ç›–ã€‚

## âœ… æ­£ç¡®çš„å›½é™…åŒ–ä¿®æ”¹æµç¨‹

### 1. æ–‡æ¡ˆä¿®æ”¹çš„æ ‡å‡†æµç¨‹

å½“éœ€è¦ä¿®æ”¹ä»»ä½•UIæ–‡æ¡ˆæ—¶ï¼Œå¿…é¡»æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

#### æ­¥éª¤1ï¼šä¿®æ”¹æºæ–‡ä»¶ (.arb)
```bash
# ä¿®æ”¹è¿™äº›æ–‡ä»¶ï¼ˆæºæ–‡ä»¶ï¼‰
lib/l10n/app_zh.arb    # ä¸­æ–‡åŸºå‡†
lib/l10n/app_en.arb    # è‹±è¯­
lib/l10n/app_ja.arb    # æ—¥è¯­
lib/l10n/app_ko.arb    # éŸ©è¯­
lib/l10n/app_fr.arb    # æ³•è¯­
lib/l10n/app_de.arb    # å¾·è¯­
lib/l10n/app_it.arb    # æ„å¤§åˆ©è¯­
lib/l10n/app_pt.arb    # è‘¡è„ç‰™è¯­
lib/l10n/app_ru.arb    # ä¿„è¯­
lib/l10n/app_es.arb    # è¥¿ç­ç‰™è¯­
lib/l10n/app_ar.arb    # é˜¿æ‹‰ä¼¯è¯­
lib/l10n/app_hi.arb    # å°åœ°è¯­
lib/l10n/app_vi.arb    # è¶Šå—è¯­
lib/l10n/app_tr.arb    # åœŸè€³å…¶è¯­
```

#### æ­¥éª¤2ï¼šè¿è¡Œç”Ÿæˆå‘½ä»¤
```bash
flutter gen-l10n
```

#### æ­¥éª¤3ï¼šéªŒè¯ç”Ÿæˆç»“æœ
```bash
git status lib/l10n/
git diff lib/l10n/s_*.dart
```

### 2. æ·»åŠ æ–°æ–‡æ¡ˆçš„å®Œæ•´æµç¨‹

#### æ­¥éª¤1ï¼šåœ¨ä¸­æ–‡åŸºå‡†æ–‡ä»¶ä¸­æ·»åŠ 
```json
// lib/l10n/app_zh.arb
{
  "newTextKey": "æ–°çš„ä¸­æ–‡æ–‡æ¡ˆ",
  "@newTextKey": {
    "description": "æ–‡æ¡ˆç”¨é€”è¯´æ˜"
  }
}
```

#### æ­¥éª¤2ï¼šåœ¨æ‰€æœ‰å…¶ä»–è¯­è¨€æ–‡ä»¶ä¸­æ·»åŠ ç›¸åŒçš„é”®
```json
// lib/l10n/app_en.arb
{
  "newTextKey": "New English Text"
}

// lib/l10n/app_ja.arb  
{
  "newTextKey": "æ–°ã—ã„æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆ"
}
// ... å…¶ä»–æ‰€æœ‰è¯­è¨€æ–‡ä»¶
```

#### æ­¥éª¤3ï¼šè¿è¡Œç”Ÿæˆå‘½ä»¤
```bash
flutter gen-l10n
```

#### æ­¥éª¤4ï¼šåœ¨ä»£ç ä¸­ä½¿ç”¨
```dart
// åœ¨Flutterä»£ç ä¸­ä½¿ç”¨
AppTexts.of(context).newTextKey
// æˆ–
S.of(context).newTextKey
```

## ğŸ” è´¨é‡æ£€æŸ¥æ¸…å•

### ä¿®æ”¹å‰æ£€æŸ¥
- [ ] ç¡®è®¤è¦ä¿®æ”¹çš„æ˜¯ `.arb` æ–‡ä»¶è€Œä¸æ˜¯ `.dart` æ–‡ä»¶
- [ ] ç¡®è®¤æ‰€æœ‰ç›¸å…³è¯­è¨€æ–‡ä»¶éƒ½éœ€è¦åŒæ­¥ä¿®æ”¹

### ä¿®æ”¹æ—¶æ£€æŸ¥
- [ ] æ‰€æœ‰è¯­è¨€æ–‡ä»¶éƒ½åŒ…å«ç›¸åŒçš„é”®å
- [ ] ç¿»è¯‘å†…å®¹å‡†ç¡®ä¸”ç¬¦åˆä¸Šä¸‹æ–‡
- [ ] JSON æ ¼å¼æ­£ç¡®ï¼ˆé€—å·ã€å¼•å·ç­‰ï¼‰

### ä¿®æ”¹åæ£€æŸ¥
- [ ] è¿è¡Œäº† `flutter gen-l10n`
- [ ] æ£€æŸ¥äº†ç”Ÿæˆçš„ `.dart` æ–‡ä»¶
- [ ] éªŒè¯äº†åº”ç”¨ä¸­çš„æ˜¾ç¤ºæ•ˆæœ
- [ ] ç¡®è®¤ git çŠ¶æ€æ˜¾ç¤ºæ­£ç¡®çš„æ–‡ä»¶å˜æ›´

## ğŸš¨ é”™è¯¯å¤„ç†

### å¦‚æœå‘ç°ç›´æ¥ä¿®æ”¹äº† .dart æ–‡ä»¶
1. **ç«‹å³åœæ­¢ä¿®æ”¹**
2. **è¿è¡Œ `git checkout lib/l10n/s_*.dart` æ¢å¤æ–‡ä»¶**
3. **æŒ‰æ­£ç¡®æµç¨‹ä¿®æ”¹å¯¹åº”çš„ .arb æ–‡ä»¶**
4. **è¿è¡Œ `flutter gen-l10n` é‡æ–°ç”Ÿæˆ**

### å¦‚æœå‘ç°ç¿»è¯‘ç¼ºå¤±æˆ–æ˜¾ç¤ºä¸­æ–‡
1. **æ£€æŸ¥å¯¹åº”è¯­è¨€çš„ .arb æ–‡ä»¶æ˜¯å¦ç¼ºå°‘è¯¥é”®**
2. **æ·»åŠ ç¼ºå¤±çš„é”®å€¼å¯¹**
3. **è¿è¡Œ `flutter gen-l10n` é‡æ–°ç”Ÿæˆ**

## ğŸ“‹ å¸¸è§æ–‡æ¡ˆä¿®æ”¹åœºæ™¯

### åœºæ™¯1ï¼šä¿®æ”¹æŒ‰é’®æ–‡å­—
```json
// ä¿®æ”¹ app_zh.arb
"welcomeStartButton": "æ–°çš„æŒ‰é’®æ–‡å­—"

// åŒæ­¥ä¿®æ”¹æ‰€æœ‰å…¶ä»–è¯­è¨€æ–‡ä»¶
"welcomeStartButton": "New Button Text"  // app_en.arb
"welcomeStartButton": "æ–°ã—ã„ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ"  // app_ja.arb
```

### åœºæ™¯2ï¼šä¿®æ”¹é¡µé¢æ ‡é¢˜
```json
// ä¿®æ”¹ app_zh.arb
"pageTitle": "æ–°çš„é¡µé¢æ ‡é¢˜"

// åŒæ­¥ä¿®æ”¹æ‰€æœ‰å…¶ä»–è¯­è¨€æ–‡ä»¶
"pageTitle": "New Page Title"  // app_en.arb
```

### åœºæ™¯3ï¼šæ·»åŠ æ–°çš„é”™è¯¯æç¤º
```json
// åœ¨ app_zh.arb ä¸­æ·»åŠ 
"newErrorMessage": "æ–°çš„é”™è¯¯æç¤ºä¿¡æ¯",
"@newErrorMessage": {
  "description": "ç”¨äºæŸæŸåœºæ™¯çš„é”™è¯¯æç¤º"
}

// åœ¨æ‰€æœ‰å…¶ä»–è¯­è¨€æ–‡ä»¶ä¸­æ·»åŠ ç›¸åŒçš„é”®
"newErrorMessage": "New Error Message"  // app_en.arb
```

## ğŸ”§ è‡ªåŠ¨åŒ–å·¥å…·

### æ¨èçš„å¼€å‘è„šæœ¬
```bash
#!/bin/bash
# scripts/update-i18n.sh

echo "ğŸŒ æ›´æ–°å›½é™…åŒ–æ–‡ä»¶..."
flutter gen-l10n

echo "âœ… æ£€æŸ¥ç”Ÿæˆç»“æœ..."
git status lib/l10n/

echo "ğŸ” æ£€æŸ¥æ˜¯å¦æœ‰æœªç¿»è¯‘çš„å†…å®¹..."
grep -r "å‘æˆ‘ä»¬å‘é€å»ºè®®å’Œåé¦ˆ" lib/l10n/s_*.dart || echo "âœ… æœªå‘ç°ä¸­æ–‡å›é€€"

echo "ğŸ‰ å›½é™…åŒ–æ›´æ–°å®Œæˆï¼"
```

## ğŸ“– ç›¸å…³æ–‡æ¡£

- è¯¦ç»†å·¥ä½œæµç¨‹æŒ‡å—ï¼š[i18n-workflow-guide.md](mdc:doc/i18n-workflow-guide.md)
- Flutter å¼ƒç”¨APIè§„åˆ™ï¼š[flutter-deprecated-api.mdc](mdc:.cursor/rules/flutter-deprecated-api.mdc)
- è®¾è®¡ä»£ç ç»„ç»‡è§„åˆ™ï¼š[design-code-organization.mdc](mdc:.cursor/rules/design-code-organization.mdc)

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

1. **æºæ–‡ä»¶ä¼˜å…ˆ**ï¼šå§‹ç»ˆä¿®æ”¹ `.arb` æ–‡ä»¶ï¼Œä»ä¸ä¿®æ”¹ `.dart` æ–‡ä»¶
2. **å®Œæ•´åŒæ­¥**ï¼šæ‰€æœ‰è¯­è¨€æ–‡ä»¶å¿…é¡»åŒ…å«ç›¸åŒçš„é”®
3. **ç«‹å³ç”Ÿæˆ**ï¼šä¿®æ”¹åç«‹å³è¿è¡Œ `flutter gen-l10n`
4. **å…¨é¢éªŒè¯**ï¼šæ£€æŸ¥ç”Ÿæˆç»“æœå’Œåº”ç”¨æ˜¾ç¤ºæ•ˆæœ
5. **å›¢é˜Ÿåä½œ**ï¼šç¡®ä¿æ‰€æœ‰å›¢é˜Ÿæˆå‘˜éƒ½éµå¾ªç›¸åŒçš„æµç¨‹

## âš¡ å¿«é€Ÿå‚è€ƒ

```bash
# ä¿®æ”¹æ–‡æ¡ˆçš„æ ‡å‡†å‘½ä»¤åºåˆ—
1. ç¼–è¾‘ lib/l10n/app_*.arb æ–‡ä»¶
2. flutter gen-l10n
3. git status lib/l10n/
4. æµ‹è¯•åº”ç”¨æ˜¾ç¤ºæ•ˆæœ
5. git add lib/l10n/ && git commit
```

éµå¾ªè¿™ä¸ªè§„åˆ™å¯ä»¥ç¡®ä¿ï¼š
- âœ… æ‰€æœ‰æ–‡æ¡ˆä¿®æ”¹éƒ½æ­£ç¡®åŒæ­¥
- âœ… é¿å…ç¿»è¯‘ä¸¢å¤±æˆ–å›é€€åˆ°ä¸­æ–‡
- âœ… ä¿æŒä»£ç åº“çš„æ•´æ´å’Œä¸€è‡´æ€§
- âœ… æé«˜å›¢é˜Ÿå¼€å‘æ•ˆç‡